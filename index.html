<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="pageTitle">Explorador Interactivo de COBIT 2019</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Slate Blue Accent -->
    <!-- Application Structure Plan: A single-scroll, multi-section page. The structure is thematic, allowing users to scroll through all content or use the sticky navigation to jump to a specific section. Key sections are: 1) 'Visi√≥n General' as a landing area. 2) 'Principios', 3) 'Arquitectura y Dominios', 4) 'Componentes', and 5) 'Ecosistema' follow sequentially. An IntersectionObserver tracks the visible section to highlight the active link in the navigation. This scrollable structure is chosen to provide a more fluid and continuous user experience, eliminating clicks and allowing for a comprehensive overview of the entire framework in one flow. -->
    <!-- Visualization & Content Choices: 1. Report Info: COBIT Evolution -> Goal: Show change -> Viz: Interactive Timeline (HTML/CSS/JS) -> Interaction: Click year to show summary -> Justification: More engaging than a list. 2. Report Info: 40 Objectives -> Goal: Organize & Explore -> Viz: Tabbed list/modal UI -> Interaction: Filter by domain tab, click objective for details -> Justification: Manages complexity, core exploration feature. 3. Report Info: Goals Cascade -> Goal: Explain core concept -> Viz: Static Diagram (HTML/CSS) -> Justification: Visualizes a core framework concept clearly. 4. Report Info: Objectives per Domain -> Goal: Show proportions -> Viz: Doughnut Chart (Chart.js/Canvas) -> Interaction: Hover for details -> Justification: Quick visual summary. 5. Report Info: Framework Relationships -> Goal: Compare -> Viz: Hub-spoke diagram (HTML/CSS) -> Interaction: Click framework to show text -> Justification: Visualizes COBIT as an integrator. All choices prioritize interaction and clarity over static text. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
        }
        .nav-link {
            transition: all 0.3s ease;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background-color: #3b82f6;
            color: white;
        }
        .objective-item {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .objective-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px; /* Slightly increased max-width */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Adjusted height */
            max-height: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        section {
            padding-top: 6rem; /* Increased padding */
            padding-bottom: 6rem; /* Increased padding */
        }
        header {
            height: 64px;
        }
        .lang-btn {
            background-color: transparent;
            color: #4b5563;
            transition: all 0.2s ease-in-out;
        }
        .lang-btn.active {
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-gray-800" data-i18n-key="headerTitle">COBIT 2019 Explorer</h1>
                </div>
                <div class="hidden md:flex items-center">
                    <div class="flex items-baseline space-x-4">
                        <a class="nav-link active px-3 py-2 text-sm font-medium" data-target="vision-general" data-i18n-key="navOverview">Visi√≥n General</a>
                        <a class="nav-link px-3 py-2 text-sm font-medium" data-target="principios" data-i18n-key="navPrinciples">Principios</a>
                        <a class="nav-link px-3 py-2 text-sm font-medium" data-target="arquitectura" data-i18n-key="navArchitecture">Arquitectura y Dominios</a>
                        <a class="nav-link px-3 py-2 text-sm font-medium" data-target="componentes" data-i18n-key="navComponents">Componentes</a>
                        <a class="nav-link px-3 py-2 text-sm font-medium" data-target="ecosistema" data-i18n-key="navEcosystem">Ecosistema</a>
                    </div>
                    <div id="language-selector" class="ml-4 flex items-center space-x-2 border border-gray-300 rounded-full p-1">
                        <button class="lang-btn text-sm font-semibold px-3 py-1 rounded-full" data-lang="es">ES</button>
                        <button class="lang-btn text-sm font-semibold px-3 py-1 rounded-full" data-lang="en">EN</button>
                    </div>
                </div>
                 <div class="md:hidden flex items-center">
                    <select id="mobile-nav" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                    </select>
                    <div id="mobile-language-selector" class="ml-2 flex items-center space-x-2 border border-gray-300 rounded-full p-1">
                         <button class="lang-btn text-sm font-semibold px-3 py-1 rounded-full" data-lang="es">ES</button>
                         <button class="lang-btn text-sm font-semibold px-3 py-1 rounded-full" data-lang="en">EN</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main>
        
        <section id="vision-general" class="content-section">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-20">
                    <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl" data-i18n-key="vgTitle">¬øQu√© es COBIT 2019?</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600" data-i18n-key="vgSubtitle">COBIT es un marco de referencia para el gobierno y la gesti√≥n de la informaci√≥n y la tecnolog√≠a (I&T) de una empresa, que ayuda a las organizaciones a crear valor √≥ptimo a partir de sus activos tecnol√≥gicos.</p>
                    <p class="mt-4 max-w-3xl mx-auto text-gray-600" data-i18n-key="vgDescription">Act√∫a como un puente esencial, traduciendo las metas estrat√©gicas del negocio en objetivos de TI espec√≠ficos y medibles. Su enfoque en la "I&T empresarial" abarca toda la tecnolog√≠a y el procesamiento de informaci√≥n que la empresa utiliza para lograr sus objetivos, asegurando que las decisiones tecnol√≥gicas se integren plenamente en el gobierno corporativo general.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20">
                    <div class="bg-white p-6 rounded-lg shadow-md text-center">
                        <div class="text-blue-500 mb-4 text-4xl">üíé</div>
                        <h3 class="text-lg font-semibold mb-2" data-i18n-key="vgCard1Title">Creaci√≥n de Valor</h3>
                        <p class="text-gray-600" data-i18n-key="vgCard1Desc">Alinear los objetivos de TI con las metas del negocio para generar valor tangible para todas las partes interesadas.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md text-center">
                        <div class="text-blue-500 mb-4 text-4xl">üõ°Ô∏è</div>
                        <h3 class="text-lg font-semibold mb-2" data-i18n-key="vgCard2Title">Optimizaci√≥n de Riesgos</h3>
                        <p class="text-gray-600" data-i18n-key="vgCard2Desc">Identificar, evaluar y mitigar los riesgos relacionados con I&T dentro del apetito de riesgo de la empresa.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md text-center">
                        <div class="text-blue-500 mb-4 text-4xl">‚öôÔ∏è</div>
                        <h3 class="text-lg font-semibold mb-2" data-i18n-key="vgCard3Title">Optimizaci√≥n de Recursos</h3>
                        <p class="text-gray-600" data-i18n-key="vgCard3Desc">Promover el uso eficiente y eficaz de todos los recursos de I&T, incluyendo personas, infraestructura y aplicaciones.</p>
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold text-center mb-12" data-i18n-key="vgTimelineTitle">Evoluci√≥n Hist√≥rica de COBIT</h3>
                    <div class="relative">
                        <div class="absolute left-1/2 w-0.5 h-full bg-gray-300 -translate-x-1/2"></div>
                        <div id="timeline-container" class="space-y-12"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="principios" class="content-section">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                 <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl" data-i18n-key="pTitle">Principios Fundamentales</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600" data-i18n-key="pSubtitle">COBIT 2019 distingue entre los principios para un sistema de gobierno efectivo y los principios para el marco que lo construye.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-center" data-i18n-key="pSystemTitle">Principios de un Sistema de Gobierno</h3>
                        <div id="system-principles" class="space-y-4"></div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-center" data-i18n-key="pFrameworkTitle">Principios de un Marco de Gobierno</h3>
                        <div id="framework-principles" class="space-y-4"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="arquitectura" class="content-section">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl" data-i18n-key="aTitle">Arquitectura y Dominios</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600" data-i18n-key="aSubtitle">La arquitectura de COBIT se basa en la distinci√≥n crucial entre Gobierno y Gesti√≥n, organizando 40 objetivos en 5 dominios.</p>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow-md mb-16">
                    <h3 class="text-xl font-semibold text-center mb-4" data-i18n-key="aGvMTitle">Gobierno vs. Gesti√≥n</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-center">
                        <div class="bg-blue-100 border border-blue-200 p-4 rounded-lg">
                            <h4 class="font-bold text-blue-800" data-i18n-key="aGvMCard1Title">Gobierno (EDM)</h4>
                            <p class="text-blue-700" data-i18n-key="aGvMCard1Desc">Responsabilidad del Consejo. Eval√∫a, Dirige y Monitorea (EDM) para asegurar que se cumplan las metas empresariales.</p>
                        </div>
                        <div class="bg-green-100 border border-green-200 p-4 rounded-lg">
                            <h4 class="font-bold text-green-800" data-i18n-key="aGvMCard2Title">Gesti√≥n (APO, BAI, DSS, MEA)</h4>
                            <p class="text-green-700" data-i18n-key="aGvMCard2Desc">Responsabilidad de la Gerencia. Planifica, Construye, Ejecuta y Monitorea las actividades para alcanzar los objetivos.</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-8 rounded-lg shadow-md mb-16">
                    <h3 class="text-xl font-semibold text-center mb-6" data-i18n-key="aCascadeTitle">La Cascada de Metas de COBIT</h3>
                    <p class="text-center text-gray-600 mb-8" data-i18n-key="aCascadeDesc">Este concepto central ilustra c√≥mo las necesidades de las partes interesadas se traducen en cascada en metas empresariales, metas de alineaci√≥n y, finalmente, en objetivos espec√≠ficos de gobierno y gesti√≥n. Esto asegura una alineaci√≥n directa desde la estrategia hasta la operaci√≥n.</p>
                    <div class="space-y-4" id="cascade-container">
                        <!-- Cascade items will be generated by JS -->
                    </div>
                </div>

                <div class="my-20">
                    <div class="text-center max-w-3xl mx-auto mb-12">
                        <h3 class="text-2xl font-bold mb-4" data-i18n-key="aChartTitle">Distribuci√≥n de Objetivos por Dominio</h3>
                        <p class="text-gray-600" data-i18n-key="aChartDesc">COBIT 2019 organiza sus 40 objetivos en 5 dominios clave. El dominio de Gobierno (EDM) establece la direcci√≥n, mientras que los cuatro dominios de Gesti√≥n se encargan de la ejecuci√≥n. Este gr√°fico muestra cu√°ntos objetivos pertenecen a cada dominio, destacando las √°reas con mayor enfoque.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="domainsChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold text-center mb-8" data-i18n-key="aExplorerTitle">Explorador de Objetivos</h3>
                    <div id="domain-tabs" class="flex flex-wrap justify-center gap-2 mb-8"></div>
                    <div id="objectives-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
                </div>
            </div>
        </section>

        <section id="componentes" class="content-section">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl" data-i18n-key="cTitle">Siete Componentes del Sistema de Gobierno</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600" data-i18n-key="cSubtitle">Un sistema de gobierno efectivo requiere un enfoque hol√≠stico que considere siete tipos de componentes interrelacionados.</p>
                     <p class="mt-4 max-w-3xl mx-auto text-gray-600" data-i18n-key="cDescription">Estos componentes, antes conocidos como "habilitadores", son los factores que, individual y colectivamente, contribuyen al buen funcionamiento del sistema. Su interdependencia es clave: un proceso bien definido no funcionar√° sin personas con las habilidades adecuadas que operen dentro de una estructura organizativa clara y sigan pol√≠ticas bien establecidas.</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="components-container">
                </div>
            </div>
        </section>

        <section id="ecosistema" class="content-section">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl" data-i18n-key="eTitle">COBIT en el Ecosistema de Est√°ndares</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600" data-i18n-key="eSubtitle">COBIT no reemplaza otros marcos, sino que act√∫a como un "marco paraguas" integrador que proporciona una estructura de gobierno general.</p>
                    <p class="mt-4 max-w-3xl mx-auto text-gray-600" data-i18n-key="eDescription">Su capacidad para actuar como una capa de orquestaci√≥n es su mayor fortaleza estrat√©gica. En lugar de competir, COBIT envuelve otros est√°ndares especializados (como ITIL, ISO 27001, COSO) en un contexto de gobierno empresarial, asegurando que todas las iniciativas de mejores pr√°cticas est√©n alineadas con la estrategia de negocio.</p>
                </div>
                <div class="flex flex-col lg:flex-row gap-8">
                    <div class="w-full lg:w-1/3">
                        <div class="space-y-4" id="ecosystem-buttons"></div>
                    </div>
                    <div class="w-full lg:w-2/3 bg-white p-6 rounded-lg shadow-md">
                        <div id="ecosystem-content"></div>
                    </div>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p data-i18n-key="footerText">Aplicaci√≥n interactiva basada en el marco COBIT¬Æ 2019 de ISACA.</p>
        </div>
    </footer>

    <div id="objective-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden" aria-modal="true" role="dialog">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
            <div class="sticky top-0 bg-white p-4 border-b flex justify-between items-center">
                <h3 id="modal-title" class="text-lg font-semibold"></h3>
                <button id="modal-close" class="text-gray-500 hover:text-gray-800 text-2xl leading-none">&times;</button>
            </div>
            <div class="p-6">
                <h4 class="font-semibold mb-2" data-i18n-key="modalPurposeTitle">Prop√≥sito del Objetivo</h4>
                <p id="modal-content"></p>
            </div>
        </div>
    </div>

    <script>
        const i18nData = {
            es: {
                pageTitle: "Explorador Interactivo de COBIT 2019",
                headerTitle: "Explorador de COBIT 2019",
                navOverview: "Visi√≥n General",
                navPrinciples: "Principios",
                navArchitecture: "Arquitectura y Dominios",
                navComponents: "Componentes",
                navEcosystem: "Ecosistema",
                vgTitle: "¬øQu√© es COBIT 2019?",
                vgSubtitle: "COBIT es un marco de referencia para el gobierno y la gesti√≥n de la informaci√≥n y la tecnolog√≠a (I&T) de una empresa, que ayuda a las organizaciones a crear valor √≥ptimo a partir de sus activos tecnol√≥gicos.",
                vgDescription: "Act√∫a como un puente esencial, traduciendo las metas estrat√©gicas del negocio en objetivos de TI espec√≠ficos y medibles. Su enfoque en la \"I&T empresarial\" abarca toda la tecnolog√≠a y el procesamiento de informaci√≥n que la empresa utiliza para lograr sus objetivos, asegurando que las decisiones tecnol√≥gicas se integren plenamente en el gobierno corporativo general.",
                vgCard1Title: "Creaci√≥n de Valor",
                vgCard1Desc: "Alinear los objetivos de TI con las metas del negocio para generar valor tangible para todas las partes interesadas.",
                vgCard2Title: "Optimizaci√≥n de Riesgos",
                vgCard2Desc: "Identificar, evaluar y mitigar los riesgos relacionados con I&T dentro del apetito de riesgo de la empresa.",
                vgCard3Title: "Optimizaci√≥n de Recursos",
                vgCard3Desc: "Promover el uso eficiente y eficaz de todos los recursos de I&T, incluyendo personas, infraestructura y aplicaciones.",
                vgTimelineTitle: "Evoluci√≥n Hist√≥rica de COBIT",
                pTitle: "Principios Fundamentales",
                pSubtitle: "COBIT 2019 distingue entre los principios para un sistema de gobierno efectivo y los principios para el marco que lo construye.",
                pSystemTitle: "Principios de un Sistema de Gobierno",
                pFrameworkTitle: "Principios de un Marco de Gobierno",
                aTitle: "Arquitectura y Dominios",
                aSubtitle: "La arquitectura de COBIT se basa en la distinci√≥n crucial entre Gobierno y Gesti√≥n, organizando 40 objetivos en 5 dominios.",
                aGvMTitle: "Gobierno vs. Gesti√≥n",
                aGvMCard1Title: "Gobierno (EDM)",
                aGvMCard1Desc: "Responsabilidad del Consejo. Eval√∫a, Dirige y Monitorea (EDM) para asegurar que se cumplan las metas empresariales.",
                aGvMCard2Title: "Gesti√≥n (APO, BAI, DSS, MEA)",
                aGvMCard2Desc: "Responsabilidad de la Gerencia. Planifica, Construye, Ejecuta y Monitorea las actividades para alcanzar los objetivos.",
                aCascadeTitle: "La Cascada de Metas de COBIT",
                aCascadeDesc: "Este concepto central ilustra c√≥mo las necesidades de las partes interesadas se traducen en cascada en metas empresariales, metas de alineaci√≥n y, finalmente, en objetivos espec√≠ficos de gobierno y gesti√≥n. Esto asegura una alineaci√≥n directa desde la estrategia hasta la operaci√≥n.",
                cascade: [
                    { titleKey: "aCascade1", descKey: "aCascade1Desc" },
                    { titleKey: "aCascade2", descKey: "aCascade2Desc" },
                    { titleKey: "aCascade3", descKey: "aCascade3Desc" },
                    { titleKey: "aCascade4", descKey: "aCascade4Desc" }
                ],
                aCascade1: "Necesidades de las Partes Interesadas:",
                aCascade1Desc: "Impulsan la creaci√≥n de valor (p. ej., beneficios, gesti√≥n de riesgos).",
                aCascade2: "Metas Empresariales:",
                aCascade2Desc: "Traducen las necesidades en metas corporativas gen√©ricas (p. ej., crecimiento de ingresos, optimizaci√≥n de costos).",
                aCascade3: "Metas de Alineaci√≥n:",
                aCascade3Desc: "Relacionan las metas empresariales con resultados espec√≠ficos de I&T (p. ej., alineaci√≥n de la estrategia de I&T con el negocio, entrega de servicios de I&T).",
                aCascade4: "Objetivos de Gobierno y Gesti√≥n:",
                aCascade4Desc: "Describen los procesos y pr√°cticas necesarios para alcanzar las metas de alineaci√≥n (p. ej., EDM02, APO02, BAI01).",
                aChartTitle: "Distribuci√≥n de Objetivos por Dominio",
                aChartDesc: "COBIT 2019 organiza sus 40 objetivos en 5 dominios clave. El dominio de Gobierno (EDM) establece la direcci√≥n, mientras que los cuatro dominios de Gesti√≥n se encargan de la ejecuci√≥n. Este gr√°fico muestra cu√°ntos objetivos pertenecen a cada dominio, destacando las √°reas con mayor enfoque.",
                aExplorerTitle: "Explorador de Objetivos",
                cTitle: "Siete Componentes del Sistema de Gobierno",
                cSubtitle: "Un sistema de gobierno efectivo requiere un enfoque hol√≠stico que considere siete tipos de componentes interrelacionados.",
                cDescription: "Estos componentes, antes conocidos como \"habilitadores\", son los factores que, individual y colectivamente, contribuyen al buen funcionamiento del sistema. Su interdependencia es clave: un proceso bien definido no funcionar√° sin personas con las habilidades adecuadas que operen dentro de una estructura organizativa clara y sigan pol√≠ticas bien establecidas.",
                eTitle: "COBIT en el Ecosistema de Est√°ndares",
                eSubtitle: "COBIT no reemplaza otros marcos, sino que act√∫a como un \"marco paraguas\" integrador que proporciona una estructura de gobierno general.",
                eDescription: "Su capacidad para actuar como una capa de orquestaci√≥n es su mayor fortaleza estrat√©gica. En lugar de competir, COBIT envuelve otros est√°ndares especializados (como ITIL, ISO 27001, COSO) en un contexto de gobierno empresarial, asegurando que todas las iniciativas de mejores pr√°cticas est√©n alineadas con la estrategia de negocio.",
                footerText: "Aplicaci√≥n interactiva basada en el marco COBIT¬Æ 2019 de ISACA.",
                modalPurposeTitle: "Prop√≥sito del Objetivo",
                chartLabel: "N√∫mero de Objetivos",
                timeline: [
                    { year: 1996, title: 'COBIT 1', description: 'Lanzado como un conjunto de objetivos de control para auditores financieros en entornos de TI.' },
                    { year: 1998, title: 'COBIT 2', description: 'Expansi√≥n m√°s all√° de la auditor√≠a para incluir directrices de gesti√≥n.' },
                    { year: 2005, title: 'COBIT 4', description: 'Introduce una mayor conexi√≥n entre los requisitos del negocio y los objetivos de TI.' },
                    { year: 2012, title: 'COBIT 5', description: 'Integra Val IT y Risk IT, presentando un √∫nico marco de gobierno y gesti√≥n con 5 principios clave.' },
                    { year: 2018, title: 'COBIT 2019', description: 'Evoluciona desde COBIT 5 para abordar nuevas tendencias (transformaci√≥n digital, ciberseguridad) e introduce factores de dise√±o para mayor flexibilidad.' }
                ],
                principles: {
                    system: [
                        { title: 'Proporcionar Valor a las Partes Interesadas', content: 'El prop√≥sito final de cualquier sistema de gobierno de I&T es la creaci√≥n de valor para sus partes interesadas. Esto se logra equilibrando beneficios, riesgos y recursos.' },
                        { title: 'Enfoque Hol√≠stico', content: 'Requiere la interacci√≥n de m√∫ltiples componentes (procesos, estructuras, personas, etc.) que deben trabajar juntos de manera sist√©mica para que el gobierno sea efectivo.' },
                        { title: 'Sistema de Gobierno Din√°mico', content: 'Debe ser capaz de adaptarse cuando cambian los factores de dise√±o, como la estrategia empresarial o nuevas tecnolog√≠as, asegurando su relevancia continua.' },
                        { title: 'Separar el Gobierno de la Gesti√≥n', content: 'El gobierno (consejo) establece la direcci√≥n (Evaluar, Dirige, Monitorear), mientras que la gesti√≥n (ejecutivos) planifica, construye, ejecuta y monitorea las actividades para alcanzar los objetivos.' },
                        { title: 'Adaptado a las Necesidades de la Empresa', content: 'Debe ser personalizado seg√∫n el contexto, industria, perfil de riesgo y estrategia espec√≠ficos de la empresa, utilizando los factores de dise√±o de COBIT.' },
                        { title: 'Sistema de Gobierno de Extremo a Extremo', content: 'Debe estar integrado en el gobierno corporativo general y cubrir a toda la empresa, no solo al departamento de TI, abarcando toda la I&T empresarial.' }
                    ],
                    framework: [
                        { title: 'Basado en un Modelo Conceptual', content: 'Debe basarse en un modelo conceptual consistente y l√≥gico, identificando componentes clave y sus relaciones para maximizar la coherencia y permitir la automatizaci√≥n.' },
                        { title: 'Abierto y Flexible', content: 'Debe permitir la adici√≥n de nuevo contenido y la capacidad de abordar nuevos problemas de manera √°gil, sin comprometer su integridad y consistencia general.' },
                        { title: 'Alineado con los Principales Est√°ndares', content: 'Debe alinearse y ser compatible con otros est√°ndares relevantes como ITIL, ISO/IEC 27001, etc., para facilitar la integraci√≥n y evitar la duplicaci√≥n de esfuerzos.' }
                    ]
                },
                components: [
                    { icon: 'üîÑ', title: 'Procesos', description: 'Conjunto de pr√°cticas y actividades para alcanzar objetivos y producir resultados que apoyen las metas generales.' },
                    { icon: 'üè¢', title: 'Estructuras Organizativas', description: 'Entidades clave para la toma de decisiones (comit√©s, roles) con responsabilidades y autoridad definidas.' },
                    { icon: 'üìú', title: 'Principios, Pol√≠ticas y Marcos', description: 'Gu√≠a pr√°ctica que traduce el comportamiento deseado en reglas y directrices para la gesti√≥n diaria.' },
                    { icon: '‚ÑπÔ∏è', title: 'Informaci√≥n', description: 'Informaci√≥n necesaria para el funcionamiento eficaz del sistema de gobierno y la toma de decisiones informada.' },
                    { icon: 'ü§ù', title: 'Cultura, √âtica y Comportamiento', description: 'El comportamiento de individuos y de la empresa en su conjunto, un factor de √©xito a menudo subestimado.' },
                    { icon: 'üë•', title: 'Personas, Habilidades y Competencias', description: 'Capacidades necesarias para la toma de buenas decisiones, la ejecuci√≥n de acciones y la finalizaci√≥n exitosa de actividades.' },
                    { icon: 'üíª', title: 'Servicios, Infraestructura y Aplicaciones', description: 'Recursos tecnol√≥gicos que el sistema de gobierno debe gestionar para proporcionar servicios de I&T a la empresa.' }
                ],
                ecosystem: [
                    { id: 'itil', title: 'COBIT + ITIL', content: '<h4>El "Qu√©" Estrat√©gico vs. el "C√≥mo" Operativo</h4><p>COBIT y ITIL son altamente complementarios. COBIT adopta un enfoque de "arriba hacia abajo", definiendo <strong>qu√©</strong> controles y procesos de TI se necesitan en funci√≥n de los objetivos del negocio. ITIL adopta un enfoque de "abajo hacia arriba", describiendo <strong>c√≥mo</strong> entregar y soportar esos servicios de manera eficiente. En la pr√°ctica, COBIT establece los objetivos (el "qu√©"), e ITIL proporciona los procesos detallados para cumplirlos (el "c√≥mo").</p>' },
                    { id: 'iso27001', title: 'COBIT + ISO/IEC 27001', content: '<h4>Gobierno General vs. Gesti√≥n Espec√≠fica de la Seguridad</h4><p>COBIT es un marco de gobierno amplio donde la seguridad es un componente clave. ISO 27001 es un est√°ndar enfocado exclusivamente en la gesti√≥n de la seguridad de la informaci√≥n (SGSI). Una organizaci√≥n puede usar COBIT para establecer el marco de gobierno y los objetivos para la seguridad (el "porqu√©"), y luego usar ISO 27001 como la metodolog√≠a detallada para implementar el SGSI requerido. COBIT asegura que la seguridad est√© alineada con el negocio.</p>' },
                    { id: 'coso', title: 'COBIT + COSO', content: '<h4>Gobierno de TI vs. Control Interno y Riesgo Financiero</h4><p>COSO proporciona un marco para el control interno y la gesti√≥n de riesgos empresariales, con un fuerte enfoque en los informes financieros. COBIT se enfoca espec√≠ficamente en el gobierno de la I&T. COBIT es el marco ideal para implementar los controles generales de TI (ITGC) que son necesarios para cumplir con los requisitos de COSO. Si COSO exige informes financieros fiables, COBIT proporciona la gu√≠a para asegurar que los sistemas de TI que los generan sean controlados y fiables.</p>' }
                ],
                objectives: [
                    { id: 'EDM01', domain: 'EDM', name: 'Asegurar el Establecimiento y Mantenimiento del Marco de Gobierno', purpose: 'Analizar y articular los requisitos para el gobierno de la I&T empresarial. Poner en marcha y mantener los componentes de gobierno con una clara autoridad y responsabilidades para alcanzar la misi√≥n, las metas y los objetivos de la empresa.' },
                    { id: 'EDM02', domain: 'EDM', name: 'Asegurar la Entrega de Beneficios', purpose: 'Optimizar el valor para el negocio a partir de las inversiones en procesos de negocio, servicios de TI y activos de TI.' },
                    { id: 'EDM03', domain: 'EDM', name: 'Asegurar la Optimizaci√≥n del Riesgo', purpose: 'Asegurar que el apetito y la tolerancia al riesgo de la empresa se comprendan, articulen y comuniquen, y que el riesgo para el valor de la empresa relacionado con el uso de la TI se identifique y gestione.' },
                    { id: 'EDM04', domain: 'EDM', name: 'Asegurar la Optimizaci√≥n de Recursos', purpose: 'Asegurar que se disponga de capacidades relacionadas con la TI (personas, procesos y tecnolog√≠a) adecuadas y suficientes para apoyar eficazmente los objetivos de la empresa a un costo √≥ptimo.' },
                    { id: 'EDM05', domain: 'EDM', name: 'Asegurar la Transparencia de las Partes Interesadas', purpose: 'Asegurar que las partes interesadas sean identificadas e involucradas en el sistema de gobierno de I&T y que la medici√≥n y la presentaci√≥n de informes sobre el rendimiento y la conformidad de la I&T empresarial sean transparentes.' },
                    { id: 'APO01', domain: 'APO', name: 'Gestionar el Marco de Gesti√≥n de I&T', purpose: 'Dise√±ar e implementar el sistema de gesti√≥n para la I&T empresarial bas√°ndose en los objetivos de la empresa y otros factores de dise√±o.' },
                    { id: 'APO02', domain: 'APO', name: 'Gestionar la Estrategia', purpose: 'Proporcionar una visi√≥n hol√≠stica del entorno actual y futuro del negocio y de la I&T, y las iniciativas necesarias para migrar al entorno deseado.' },
                    { id: 'APO03', domain: 'APO', name: 'Gestionar la Arquitectura Empresarial', purpose: 'Establecer una arquitectura com√∫n (procesos, informaci√≥n, aplicaciones, tecnolog√≠a) en l√≠nea con la estrategia empresarial.' },
                    { id: 'APO04', domain: 'APO', name: 'Gestionar la Innovaci√≥n', purpose: 'Mantener un conocimiento de las tendencias de I&T, identificar oportunidades de innovaci√≥n y planificar c√≥mo beneficiarse de ellas.' },
                    { id: 'APO05', domain: 'APO', name: 'Gestionar el Portafolio', purpose: 'Ejecutar la direcci√≥n estrat√©gica para las inversiones, evaluando, priorizando y equilibrando programas y servicios.' },
                    { id: 'APO06', domain: 'APO', name: 'Gestionar el Presupuesto y los Costos', purpose: 'Gestionar las actividades financieras relacionadas con la I&T, incluyendo presupuesto, costos, beneficios y priorizaci√≥n del gasto.' },
                    { id: 'APO07', domain: 'APO', name: 'Gestionar los Recursos Humanos', purpose: 'Asegurar un reclutamiento, planificaci√≥n, evaluaci√≥n y desarrollo √≥ptimos de los recursos humanos.' },
                    { id: 'APO08', domain: 'APO', name: 'Gestionar las Relaciones', purpose: 'Gestionar las relaciones con las partes interesadas del negocio de manera formalizada y transparente.' },
                    { id: 'APO09', domain: 'APO', name: 'Gestionar los Acuerdos de Servicio', purpose: 'Alinear los productos, servicios y niveles de servicio de I&T con las necesidades y expectativas de la empresa.' },
                    { id: 'APO10', domain: 'APO', name: 'Gestionar los Proveedores', purpose: 'Gestionar los productos y servicios de proveedores para cumplir con los requisitos de la empresa.' },
                    { id: 'APO11', domain: 'APO', name: 'Gestionar la Calidad', purpose: 'Definir, comunicar y monitorear los requisitos de calidad en todos los procesos y resultados relacionados con la I&T.' },
                    { id: 'APO12', domain: 'APO', name: 'Gestionar el Riesgo', purpose: 'Identificar, evaluar y reducir continuamente el riesgo relacionado con la I&T dentro de los niveles de tolerancia establecidos.' },
                    { id: 'APO13', domain: 'APO', name: 'Gestionar la Seguridad', purpose: 'Definir, operar y monitorear un sistema de gesti√≥n de seguridad de la informaci√≥n.' },
                    { id: 'APO14', domain: 'APO', name: 'Gestionar los Datos', purpose: 'Lograr y mantener una gesti√≥n eficaz de los activos de datos de la empresa a lo largo de su ciclo de vida.' },
                    { id: 'BAI01', domain: 'BAI', name: 'Gestionar los Programas', purpose: 'Gestionar todos los programas del portafolio de inversiones en alineaci√≥n con la estrategia de la empresa.' },
                    { id: 'BAI02', domain: 'BAI', name: 'Gestionar la Definici√≥n de Requisitos', purpose: 'Identificar soluciones y analizar los requisitos para asegurar que se alineen con la estrategia de la empresa.' },
                    { id: 'BAI03', domain: 'BAI', name: 'Gestionar la Identificaci√≥n y Construcci√≥n de Soluciones', purpose: 'Establecer y mantener productos y servicios en l√≠nea con los requisitos de la empresa.' },
                    { id: 'BAI04', domain: 'BAI', name: 'Gestionar la Disponibilidad y la Capacidad', purpose: 'Equilibrar las necesidades actuales y futuras de disponibilidad, rendimiento y capacidad con una prestaci√≥n de servicios rentable.' },
                    { id: 'BAI05', domain: 'BAI', name: 'Gestionar el Cambio Organizacional', purpose: 'Maximizar la probabilidad de implementar con √©xito un cambio organizacional sostenible en toda la empresa.' },
                    { id: 'BAI06', domain: 'BAI', name: 'Gestionar los Cambios de TI', purpose: 'Gestionar todos los cambios de manera controlada, incluyendo cambios est√°ndar y mantenimiento de emergencia.' },
                    { id: 'BAI07', domain: 'BAI', name: 'Gestionar la Aceptaci√≥n del Cambio y la Transici√≥n de TI', purpose: 'Aceptar formalmente y poner en funcionamiento nuevas soluciones.' },
                    { id: 'BAI08', domain: 'BAI', name: 'Gestionar el Conocimiento', purpose: 'Mantener la disponibilidad de conocimiento e informaci√≥n de gesti√≥n relevantes para apoyar la toma de decisiones.' },
                    { id: 'BAI09', domain: 'BAI', name: 'Gestionar los Activos', purpose: 'Gestionar los activos de I&T a lo largo de su ciclo de vida para asegurar que su uso aporte valor a un costo √≥ptimo.' },
                    { id: 'BAI10', domain: 'BAI', name: 'Gestionar la Configuraci√≥n', purpose: 'Definir y mantener las descripciones y relaciones entre los recursos y capacidades clave.' },
                    { id: 'BAI11', domain: 'BAI', name: 'Gestionar los Proyectos', purpose: 'Gestionar todos los proyectos en alineaci√≥n con la estrategia de la empresa y de manera coordinada.' },
                    { id: 'DSS01', domain: 'DSS', name: 'Gestionar las Operaciones', purpose: 'Coordinar y ejecutar las actividades y los procedimientos operativos necesarios para prestar servicios de I&T.' },
                    { id: 'DSS02', domain: 'DSS', name: 'Gestionar las Peticiones de Servicio e Incidentes', purpose: 'Proporcionar una respuesta oportuna y eficaz a las peticiones de los usuarios y la resoluci√≥n de incidentes.' },
                    { id: 'DSS03', domain: 'DSS', name: 'Gestionar los Problemas', purpose: 'Identificar, clasificar y resolver los problemas y sus causas ra√≠z para evitar la recurrencia de incidentes.' },
                    { id: 'DSS04', domain: 'DSS', name: 'Gestionar la Continuidad', purpose: 'Establecer y mantener un plan para responder a incidentes y permitir la continuaci√≥n de las operaciones cr√≠ticas.' },
                    { id: 'DSS05', domain: 'DSS', name: 'Gestionar los Servicios de Seguridad', purpose: 'Proteger la informaci√≥n de la empresa para mantener el riesgo de seguridad en un nivel aceptable.' },
                    { id: 'DSS06', domain: 'DSS', name: 'Gestionar los Controles de los Procesos de Negocio', purpose: 'Definir y mantener controles de procesos de negocio para asegurar que la informaci√≥n satisface los requisitos de control.' },
                    { id: 'MEA01', domain: 'MEA', name: 'Gestionar la Monitorizaci√≥n del Rendimiento y la Conformidad', purpose: 'Recopilar, validar y evaluar las metas y m√©tricas, y supervisar que los procesos se desempe√±en seg√∫n lo acordado.' },
                    { id: 'MEA02', domain: 'MEA', name: 'Gestionar el Sistema de Control Interno', purpose: 'Supervisar y evaluar continuamente el entorno de control para identificar deficiencias e iniciar mejoras.' },
                    { id: 'MEA03', domain: 'MEA', name: 'Gestionar el Cumplimiento de los Requisitos Externos', purpose: 'Evaluar que los procesos de I&T cumplen con las leyes, regulaciones y requisitos contractuales.' },
                    { id: 'MEA04', domain: 'MEA', name: 'Gestionar el Aseguramiento', purpose: 'Planificar, definir el alcance y ejecutar iniciativas de aseguramiento para cumplir con los requisitos y objetivos estrat√©gicos.' }
                ],
                domains: [
                    { id: 'EDM', name: 'Evaluate, Direct and Monitor', color: '#60a5fa' },
                    { id: 'APO', name: 'Align, Plan and Organize', color: '#4ade80' },
                    { id: 'BAI', name: 'Build, Acquire and Implement', color: '#facc15' },
                    { id: 'DSS', name: 'Deliver, Service and Support', color: '#f87171' },
                    { id: 'MEA', name: 'Monitor, Evaluate and Assess', color: '#c084fc' }
                ]
            }
        };

        let currentLang = 'es';
        let domainsChart = null;

        function translatePage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            document.querySelectorAll('[data-i18n-key]').forEach(el => {
                const key = el.dataset.i18nKey;
                if (i18nData[lang][key] && typeof i18nData[lang][key] === 'string') {
                    el.innerHTML = i18nData[lang][key];
                }
            });

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            // Re-initialize components that depend on language
            initMobileNav();
            initTimeline();
            initPrinciples();
            initArchitecture();
            initDomainsChart();
            initComponents();
            initEcosystem();
        }

        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileNav = document.getElementById('mobile-nav');
            const sections = document.querySelectorAll('.content-section');
            const langSelectorContainers = [document.getElementById('language-selector'), document.getElementById('mobile-language-selector')];
            const header = document.querySelector('header');

            function smoothScrollTo(targetId) {
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    const headerOffset = header.offsetHeight;
                    const elementPosition = targetSection.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    smoothScrollTo(e.target.dataset.target);
                });
            });

            mobileNav.addEventListener('change', (e) => {
                smoothScrollTo(e.target.value);
            });

            langSelectorContainers.forEach(container => {
                container.addEventListener('click', (e) => {
                    if (e.target.tagName === 'BUTTON' && e.target.classList.contains('lang-btn')) {
                        const newLang = e.target.dataset.lang;
                        if (newLang !== currentLang) {
                            translatePage(newLang);
                        }
                    }
                });
            });

            const observerOptions = {
                root: null,
                rootMargin: `-${header.offsetHeight}px 0px -40% 0px`,
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const targetId = entry.target.id;
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.dataset.target === targetId);
                        });
                        if (mobileNav.value !== targetId) {
                           mobileNav.value = targetId;
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });
            
            translatePage(currentLang);
        });

        function initMobileNav() {
            const mobileNav = document.getElementById('mobile-nav');
            const currentActive = document.querySelector('.nav-link.active')?.dataset.target || 'vision-general';
            mobileNav.innerHTML = '';
            const navKeys = ['navOverview', 'navPrinciples', 'navArchitecture', 'navComponents', 'navEcosystem'];
            const targets = ['vision-general', 'principios', 'arquitectura', 'componentes', 'ecosistema'];
            navKeys.forEach((key, index) => {
                const option = document.createElement('option');
                option.value = targets[index];
                option.textContent = i18nData[currentLang][key];
                mobileNav.appendChild(option);
            });
            mobileNav.value = currentActive;
        }

        function initTimeline() {
            const container = document.getElementById('timeline-container');
            container.innerHTML = '';
            i18nData[currentLang].timeline.forEach((item, index) => {
                const isLeft = index % 2 === 0;
                const itemHtml = `
                    <div class="relative">
                        <div class="absolute ${isLeft ? 'right-1/2' : 'left-1/2'} w-4 h-4 bg-blue-500 rounded-full mt-1.5 -translate-x-1/2 ${isLeft ? 'translate-x-1/2' : ''}"></div>
                        <div class="w-1/2 p-4 bg-white rounded-lg shadow-md ${isLeft ? 'mr-auto' : 'ml-auto'}">
                            <h4 class="font-bold text-lg">${item.year} - ${item.title}</h4>
                            <p class="text-sm text-gray-600">${item.description}</p>
                        </div>
                    </div>`;
                container.innerHTML += itemHtml;
            });
        }

        function initPrinciples() {
            const systemContainer = document.getElementById('system-principles');
            const frameworkContainer = document.getElementById('framework-principles');
            systemContainer.innerHTML = '';
            frameworkContainer.innerHTML = '';
            
            i18nData[currentLang].principles.system.forEach(p => systemContainer.innerHTML += createAccordionItem(p.title, p.content));
            i18nData[currentLang].principles.framework.forEach(p => frameworkContainer.innerHTML += createAccordionItem(p.title, p.content));
            
            initAccordionListeners();
        }
        
        function createAccordionItem(title, content) {
            return `
                <div class="border rounded-md bg-white">
                    <div class="accordion-header w-full p-4 text-left font-semibold cursor-pointer flex justify-between items-center">
                        <span>${title}</span>
                        <span>&#9662;</span>
                    </div>
                    <div class="accordion-content p-4 border-t text-gray-700" style="display: none;">
                        <p>${content}</p>
                    </div>
                </div>`;
        }
        
        function createCascadeAccordionItem(titleKey, descKey) {
            const title = i18nData[currentLang][titleKey];
            const content = i18nData[currentLang][descKey];
             return `
                <div class="border rounded-md bg-white shadow-sm">
                    <div class="accordion-header w-full p-4 text-left font-semibold cursor-pointer flex justify-between items-center">
                        <span>${title}</span>
                        <span>&#9662;</span>
                    </div>
                    <div class="accordion-content p-4 border-t text-gray-700" style="display: none;">
                        <p>${content}</p>
                    </div>
                </div>`;
        }
        
        function initAccordionListeners() {
             document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('span:last-child');
                    const isVisible = content.style.display === 'block';
                    content.style.display = isVisible ? 'none' : 'block';
                    icon.innerHTML = isVisible ? '&#9662;' : '&#9652;';
                });
            });
        }

        function initArchitecture() {
            const tabsContainer = document.getElementById('domain-tabs');
            const gridContainer = document.getElementById('objectives-grid');
            const modal = document.getElementById('objective-modal');
            const cascadeContainer = document.getElementById('cascade-container');
            
            tabsContainer.innerHTML = '';
            cascadeContainer.innerHTML = '';

            i18nData[currentLang].cascade.forEach(item => {
                cascadeContainer.innerHTML += createCascadeAccordionItem(item.titleKey, item.descKey);
            });

            i18nData[currentLang].domains.forEach(domain => {
                const button = document.createElement('button');
                button.className = 'tab-button px-4 py-2 text-sm font-medium rounded-md';
                button.textContent = `${domain.id} (${i18nData[currentLang].objectives.filter(o => o.domain === domain.id).length})`;
                button.dataset.domain = domain.id;
                tabsContainer.appendChild(button);
            });

            tabsContainer.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    const domainId = e.target.dataset.domain;
                    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    renderObjectives(domainId);
                }
            });
            
            gridContainer.addEventListener('click', (e) => {
                const item = e.target.closest('.objective-item');
                if (item) {
                    const objectiveId = item.dataset.id;
                    const objective = i18nData[currentLang].objectives.find(o => o.id === objectiveId);
                    document.getElementById('modal-title').textContent = `${objective.id}: ${objective.name}`;
                    document.getElementById('modal-content').textContent = objective.purpose;
                    modal.classList.remove('hidden');
                }
            });

            document.getElementById('modal-close').addEventListener('click', () => modal.classList.add('hidden'));
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.add('hidden');
            });

            const currentActiveDomain = document.querySelector('.tab-button.active')?.dataset.domain || i18nData[currentLang].domains[0].id;
            const buttonToActivate = tabsContainer.querySelector(`[data-domain="${currentActiveDomain}"]`) || tabsContainer.querySelector('.tab-button');
            if (buttonToActivate) {
                buttonToActivate.click();
            }
            
            initAccordionListeners();
        }

        function renderObjectives(domainId) {
            const gridContainer = document.getElementById('objectives-grid');
            gridContainer.innerHTML = '';
            const filtered = i18nData[currentLang].objectives.filter(o => o.domain === domainId);
            filtered.forEach(obj => {
                const item = document.createElement('div');
                item.className = 'objective-item bg-white p-4 rounded-lg shadow-md border-l-4';
                const domainInfo = i18nData[currentLang].domains.find(d => d.id === obj.domain);
                item.style.borderColor = domainInfo.color;
                item.dataset.id = obj.id;
                item.innerHTML = `
                    <p class="font-bold text-gray-800">${obj.id}</p>
                    <p class="text-sm text-gray-600">${obj.name}</p>
                `;
                gridContainer.appendChild(item);
            });
        }

        function initDomainsChart() {
            const ctx = document.getElementById('domainsChart').getContext('2d');
            if (domainsChart) {
                domainsChart.destroy();
            }
            const data = {
                labels: i18nData[currentLang].domains.map(d => `${d.id}: ${d.name}`),
                datasets: [{
                    label: i18nData[currentLang].chartLabel,
                    data: i18nData[currentLang].domains.map(d => i18nData[currentLang].objectives.filter(o => o.domain === d.id).length),
                    backgroundColor: i18nData[currentLang].domains.map(d => d.color),
                    borderWidth: 1
                }]
            };
            domainsChart = new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 25,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed;
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function initComponents() {
            const container = document.getElementById('components-container');
            container.innerHTML = '';
            i18nData[currentLang].components.forEach(c => {
                container.innerHTML += `
                    <div class="bg-white p-6 rounded-lg shadow-md text-center h-full flex flex-col items-center justify-center">
                        <div class="text-4xl mb-4">${c.icon}</div>
                        <h4 class="font-semibold text-lg mb-2">${c.title}</h4>
                        <p class="text-gray-600 text-sm">${c.description}</p>
                    </div>
                `;
            });
        }

        function initEcosystem() {
            const buttonsContainer = document.getElementById('ecosystem-buttons');
            const contentContainer = document.getElementById('ecosystem-content');
            buttonsContainer.innerHTML = '';

            i18nData[currentLang].ecosystem.forEach(item => {
                const button = document.createElement('button');
                button.className = 'w-full text-left p-4 rounded-md border bg-white hover:bg-gray-50';
                button.dataset.target = item.id;
                button.textContent = item.title;
                buttonsContainer.appendChild(button);
            });

            buttonsContainer.addEventListener('click', e => {
                if (e.target.tagName === 'BUTTON') {
                    const targetId = e.target.dataset.target;
                    const content = i18nData[currentLang].ecosystem.find(i => i.id === targetId).content;
                    contentContainer.innerHTML = content;
                    
                    document.querySelectorAll('#ecosystem-buttons button').forEach(b => b.classList.remove('bg-blue-100', 'border-blue-500'));
                    e.target.classList.add('bg-blue-100', 'border-blue-500');
                }
            });
            
            const buttonToActivate = buttonsContainer.querySelector('button');
            if (buttonToActivate) {
                buttonToActivate.click();
            }
        }
    </script>
</body>
</html>
